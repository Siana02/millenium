<!DOCTYPE html>
<html lang="en">
<head>
  <!-- 1. PAGE METADATA -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="theme-color" content="#0A0A0A">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="format-detection" content="telephone=no">

  <!-- 2. TITLE + DESCRIPTION -->
  <title>Millennium Casino Portal – Sleek Registration. Premium Value.</title>
  <meta name="description" content="Millennium Casino's client portal delivers modern UI/UX, secure registration, and investor-ready design.">

  <!-- 3. FAVICONS + DEVICE ICONS -->
  <link rel="icon" type="image/x-icon" href="/assets/icons/favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon-16x16.png">
  <link rel="apple-touch-icon" href="/assets/icons/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/assets/icons/android-chrome-192x192.png">
  <link rel="icon" type="image/png" sizes="512x512" href="/assets/icons/android-chrome-512x512.png">

  <!-- 4. PWA FEATURES -->
  <link rel="manifest" href="/manifest.json">
  <!-- Optional: Apple splash/mask icons (add if needed) -->

  <!-- 5. FONTS (GOOGLE FONTS) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Inter:wght@400;500;700&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

  <!-- 6. STYLESHEETS -->
  <link rel="stylesheet" href="/src/style.css">
  
  <!-- 8. SEO + SOCIAL MEDIA PREVIEW TAGS -->
  <meta property="og:title" content="Millennium Casino Portal">
  <meta property="og:description" content="Sleek, secure registration platform for Millennium Casino, Nyali. Built for investors & clients.">
  <meta property="og:image" content="/assets/images/og-preview.jpg">
  <meta property="og:url" content="https://millenniumcasino.app">
  <meta name="twitter:card" content="summary_large_image">

  <!-- 9. PERFORMANCE + SECURITY -->
  <link rel="dns-prefetch" href="https://fonts.googleapis.com">
  <link rel="dns-prefetch" href="https://fonts.gstatic.com">
  </head>
<body>
 <!-- SECTION 2: LOGIN (Paste inside <body> after your header) -->
<section id="section-login" aria-label="Login Section">
  <form id="login-form" autocomplete="off">
    <div class="login-heading-group">
  <i class="fa-solid fa-shield-halved login-icon" aria-hidden="true"></i>
  <div class="login-title-wrapper">
    <div class="login-title-top" data-i18n="login_title_top">MILLENNIUM</div>
    <div class="login-title-bottom" data-i18n="login_title_bottom">Casino</div>
  </div>
</div>
    <!-- Name Input -->
    <label for="login-name" class="login-label" data-i18n="input_full_name_label">Enter Full Name</label>
    <div class="input-group">
      <i class="fa-solid fa-user input-icon" aria-hidden="true"></i>
      <input
        id="login-name"
        type="text"
        placeholder="Enter Full Name"
        data-i18n="input_full_name_placeholder"
        aria-describedby="login-name-desc"
        required
        />
      <span id="login-name-desc" class="sr-only">Full name required for registration.</span>
    </div>
    <!-- Role Dropdown -->
    <label for="login-role" class="login-label" data-i18n="select_role_label">Select Role</label>
    <div class="input-group">
      <i class="fa-solid fa-briefcase input-icon" aria-hidden="true"></i>
      <select id="login-role" aria-label="Select Role" data-i18n="select_role_dropdown">
        <option value="User" data-i18n="role_user">User</option>
        <option value="Staff" data-i18n="role_staff">Staff</option>
        <option value="Admin" data-i18n="role_admin">Admin</option>
      </select>
    </div>
    <!-- Buttons -->
    <button type="submit" class="btn-login" aria-label="Login" data-i18n="button_login">
      Login <i class="fa-solid fa-arrow-right btn-icon" aria-hidden="true"></i>
    </button>
    <button type="button" id="guest-btn" class="btn-guest" aria-label="Continue as Guest" data-i18n="button_guest">
      <i class="fa-solid fa-user-secret btn-icon" aria-hidden="true"></i> Continue as Guest
    </button>
  </form>
</section>

<!-- Fonts (Import as needed in <head>) -->
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Great+Vibes&family=Inter:wght@400;500;700&display=swap" rel="stylesheet">

<!-- Font Awesome 6 (If not already in <head>) -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />

<style>
/* --- Section Container --- */
#section-login {
  min-height: 100vh;
  width: 100vw;
  display: flex; align-items: center; justify-content: center;
  background: linear-gradient(135deg, #121212 60%, #1a1a1a 100%);
  font-family: 'Inter', 'Poppins', 'Playfair Display', serif;
  animation: fadeInSection 0.8s cubic-bezier(.68,-0.55,.27,1.55);
}
@keyframes fadeInSection { 0%{opacity:0;} 100%{opacity:1;} }

/* --- Login Form Card --- */
#login-form {
  width: 90vw; max-width: 440px;
  background: rgba(18,18,18,0.60);
  border-radius: 2em;
  box-shadow: 0 6px 32px #d4af3722;
  padding: 2.5em 2em;
  display: flex; flex-direction: column; gap: 1.6em; align-items: center;
  backdrop-filter: blur(7px);
  animation: slideUpForm 1.2s cubic-bezier(.68,-0.55,.27,1.55);
  position: relative;
}
@keyframes slideUpForm { 0%{transform:translateY(60px);opacity:0;} 100%{transform:translateY(0);opacity:1;} }

/* Responsive Widths + Padding */
@media (max-width:480px) { #login-form { width:90vw; padding:2em 1em; } }
@media (min-width:481px) and (max-width:1024px) { #login-form { width:60vw; padding:2.7em 2em; } }
@media (min-width:1025px) { #login-form { width:40vw; padding:2.8em 2.2em; } }

/* --- Heading --- */
.login-heading-group {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 0.3em;
  margin-bottom: 0.7em;
}
  .login-title-wrapper {
  text-align: center;
  width: 100%;
}
.login-icon {
  color: #d4af37;
  font-size: 2.3rem;
  margin-right: 0.4em;
  filter: drop-shadow(0 0 6px #d4af3788);
}

/* Top Line: Millennium */
.login-title-top {
  font-family: 'Playfair Display', serif;
  font-size: 1.8rem;
  text-transform: uppercase;
  font-weight: 700;
  letter-spacing: 0.15em;
  background: linear-gradient(90deg, #d4af37 40%, #eccd79 75%, #d4af37 100%);
  -webkit-background-clip: text; -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: -0.35em;
}
@media (min-width:1025px) { .login-title-top { font-size: 2.4rem; } }

/* Bottom Line: Casino (Great Vibes, glow/twinkle) */
.login-title-bottom {
  font-family: 'Great Vibes', cursive;
  font-size: 2rem;
  color: #fdf6e3;
  text-shadow: 0 0 8px #d4af37, 0 0 2px #fff;
  margin-top: -0.7em;
  position: relative;
  animation: casinoTwinkle 3s ease-in-out infinite;
  text-align: center;
}
@keyframes casinoTwinkle {
  0%,100% { text-shadow: 0 0 8px #d4af37, 0 0 2px #fff;}
  60% { text-shadow: 0 0 18px #d4af37, 0 0 8px #fff;}
}

/* --- Labels --- */
.login-label {
  align-self: flex-start;
  font-size: 1.05em;
  font-weight: 500;
  margin-bottom: 0.3em;
  color: #F5F5F5;
  letter-spacing: 0.03em;
  font-family: 'Inter', sans-serif;
}

/* --- Input Group --- */
.input-group {
  position: relative;
  width: 100%;
  margin-bottom: 0.3em;
}
.input-icon {
  position: absolute; left: 0.9em; top: 50%; transform: translateY(-50%);
  color: #D4AF37; font-size: 1.2em;
  z-index: 2;
}
.input-group input, .input-group select {
  width: 100%; min-height: 48px;
  padding: 0.9em 1em 0.9em 2.5em;
  border-radius: 1em;
  background: rgba(0,0,0,0.30);
  color: #F5F5F5;
  border: 2px solid transparent;
  outline: none;
  font-size: 1em;
  font-family: 'Inter', 'Poppins', sans-serif;
  transition: border-color .23s, box-shadow .23s, transform .18s;
  box-shadow: 0 2px 8px #C00E3B22;
}
.input-group input:focus, .input-group select:focus {
  border-color: #D4AF37; box-shadow: 0 0 12px #D4AF3755; transform: scale(1.02);
}
.input-group select:focus { animation: expandDrop 0.2s; }
@keyframes expandDrop { from{transform:scaleY(0.95);}to{transform:scaleY(1.03);} }
.input-group select {
  appearance: none; background: rgba(0,0,0,0.30);
}
.input-group select:active, .input-group select:focus {
  outline: 2px solid #d4af37;
}
.input-group option { color: #121212; background: #fff;}

/* --- Buttons --- */
.btn-login, .btn-guest {
  width: 100%; min-height: 48px; padding: 1em 0;
  font-size: 1.15em; font-weight: bold;
  border-radius: 1.5em; border: none; cursor: pointer; margin-top: 0.5em;
  display: flex; align-items: center; justify-content: center; gap: 0.7em;
  box-shadow: 0 2px 12px #C00E3B22;
  transition: box-shadow 0.2s, transform 0.13s, background 0.17s;
}
@media (min-width:1025px) { .btn-login, .btn-guest { font-size: 1.2em; min-height: 56px; } }
.btn-login {
  background: linear-gradient(90deg, #D4AF37 70%, #C00E3B 100%);
  color: #0A0A0A;
}
.btn-login:hover { box-shadow: 0 0 20px #D4AF37; transform: translateY(-2px) scale(1.04); }
.btn-login:active { transform: scale(0.98); }
.btn-guest {
  background: linear-gradient(90deg, #C00E3B 60%, #D4AF37 100%);
  color: #F5F5F5;
}
.btn-guest:hover { box-shadow: 0 0 14px #C00E3B; transform: translateY(-2px) scale(1.03); }
.btn-guest:active { transform: scale(0.98); }
.btn-icon {
  font-size: 1.2em;
  margin-left: 0.3em;
}
/* --- Accessibility --- */
.sr-only { position:absolute;width:1px;height:1px;overflow:hidden;clip:rect(1px,1px,1px,1px); }
input:focus, select:focus, button:focus { outline: 2px solid #d4af37; outline-offset: 2px; }
input, select, button { font-family: inherit; }
input:-webkit-autofill { -webkit-box-shadow: 0 0 0 30px #121212 inset; -webkit-text-fill-color: #F5F5F5;}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // Fade-in handled by CSS, slide-up handled by CSS
  // Name field accessibility
  const loginForm = document.getElementById('login-form');
  loginForm.addEventListener('submit', function(e) {
    e.preventDefault();
    const name = document.getElementById('login-name').value.trim();
    const role = document.getElementById('login-role').value;
    localStorage.setItem('casinoUserName', name);
    localStorage.setItem('casinoUserRole', role);
    // Fade out section-login, then fake dashboard
    document.getElementById('section-login').style.transition = "opacity 0.5s";
    document.getElementById('section-login').style.opacity = 0;
    setTimeout(() => {
      document.getElementById('section-login').style.display = 'none';
      showDashboard(name, role);
    }, 500);
  });
  document.getElementById('guest-btn').addEventListener('click', function() {
    localStorage.setItem('casinoUserName', 'Guest');
    localStorage.setItem('casinoUserRole', 'User');
    document.getElementById('section-login').style.transition = "opacity 0.5s";
    document.getElementById('section-login').style.opacity = 0;
    setTimeout(() => {
      document.getElementById('section-login').style.display = 'none';
      showDashboard('Guest', 'User');
    }, 500);
  });
  // Keyboard accessibility for select
  document.getElementById('login-role').addEventListener('keydown', function(e){
    if(e.key === 'ArrowDown' || e.key === 'ArrowUp'){ this.size = 3; }
    if(e.key === 'Escape' || e.key === 'Tab'){ this.size = 1; }
  });
});

function showDashboard(name, role) {
  // Replace with real dashboard code
  alert("Welcome, " + name + " (" + role + ")! [Dashboard would appear here]");
}
</script>
  <!-- SECTION 3: USER REGISTRATION -->
<section id="registration-section">
  <!-- A: Welcome Banner -->
  <div class="reg-banner" role="heading" aria-level="1">
    <span>Guest Registration — Millennium Casino</span>
  </div>
  <!-- B: Instruction/Info Box -->
  <div class="reg-info-box">
    Please fill out all required fields to register securely. Your information is protected by our privacy policies.
  </div>
  <!-- C: Registration Form -->
  <form id="reg-form" autocomplete="off" novalidate>
    <div class="form-flex">

      <!-- Full Name -->
      <div class="form-group full-width">
        <label for="reg-name" class="reg-label">FULL NAME</label>
        <input type="text" id="reg-name" name="name" class="reg-input" placeholder="e.g., John Mwangi Odhiambo" autocomplete="name" />
        <span class="field-tip" id="tip-name">Please enter your official full name as per your ID.</span>
        <span class="error-msg" id="error-name"></span>
      </div>

      <!-- ID/Passport -->
      <div class="form-group half-width">
        <label for="reg-id" class="reg-label">ID NUMBER / PASSPORT NO.</label>
        <input type="text" id="reg-id" name="id" class="reg-input" placeholder="12345678" />
        <span class="field-tip" id="tip-id">Enter your official ID or passport number.</span>
        <span class="error-msg" id="error-id"></span>
      </div>

      <!-- Phone Number -->
      <div class="form-group half-width">
        <label for="reg-phone" class="reg-label">PHONE NUMBER</label>
        <input type="tel" id="reg-phone" name="phone" class="reg-input" placeholder="+254700000000" maxlength="13" />
        <span class="field-tip" id="tip-phone">Format: +254XXXXXXXXX</span>
        <span class="error-msg" id="error-phone"></span>
      </div>

      <!-- Address -->
      <div class="form-group full-width">
        <label for="reg-address" class="reg-label">ADDRESS</label>
        <textarea id="reg-address" name="address" class="reg-input reg-textarea" placeholder="Nairobi, Kenya"></textarea>
        <span class="field-tip" id="tip-address">Enter your current residential address.</span>
        <span class="error-msg" id="error-address"></span>
      </div>

      <!-- Date of Birth -->
      <div class="form-group half-width">
        <label for="reg-dob" class="reg-label">DATE OF BIRTH</label>
        <input type="date" id="reg-dob" name="dob" class="reg-input reg-date" />
        <span class="field-tip" id="tip-dob">Select your date of birth.</span>
        <span class="error-msg" id="error-dob"></span>
      </div>

      <!-- Nationality -->
      <div class="form-group half-width">
        <label for="reg-nation" class="reg-label">NATIONALITY</label>
        <select id="reg-nation" name="nation" class="reg-input reg-select">
          <option value="">Select...</option>
          <option value="Kenyan">Kenyan</option>
          <option value="Ugandan">Ugandan</option>
          <option value="Tanzanian">Tanzanian</option>
          <option value="Rwandan">Rwandan</option>
          <option value="Burundian">Burundian</option>
          <option value="Other">Other</option>
        </select>
        <span class="field-tip" id="tip-nation">Choose your nationality.</span>
        <span class="error-msg" id="error-nation"></span>
      </div>

      <!-- Gender -->
      <div class="form-group full-width">
        <span class="reg-label" id="gender-group-label">GENDER</span>
        <div class="gender-radio-group" aria-labelledby="gender-group-label">
          <label><input type="radio" name="gender" value="Male" /> Male</label>
          <label><input type="radio" name="gender" value="Female" /> Female</label>
          <label><input type="radio" name="gender" value="Other" /> Other</label>
        </div>
        <span class="field-tip" id="tip-gender">Select your gender.</span>
        <span class="error-msg" id="error-gender"></span>
      </div>

      <!-- Photo Upload -->
      <div class="form-group full-width">
        <label for="reg-photo" class="reg-label">PASSPORT PHOTO</label>
        <input type="file" id="reg-photo" name="photo" accept=".jpg,.jpeg,.png" class="reg-input reg-file" />
        <span class="field-tip" id="tip-photo">Upload a clear passport photo (.jpg, .png).</span>
        <span class="error-msg" id="error-photo"></span>
        <div id="photo-preview" class="photo-preview" aria-live="polite"></div>
      </div>

      <!-- Terms and Conditions -->
      <div class="form-group full-width terms-row">
        <input type="checkbox" id="reg-terms" />
        <label for="reg-terms" class="terms-label">I agree to the terms & conditions</label>
      </div>

      <!-- D: Buttons -->
      <div class="button-row">
        <button type="button" class="btn guest-btn" id="continue-guest" aria-label="Continue as Guest">
          <i class="fa-solid fa-user"></i> Continue as Guest
        </button>
        <button type="submit" class="btn submit-btn" id="reg-submit" aria-label="Submit & Save" disabled>
          <i class="fa-solid fa-floppy-disk"></i> Submit & Save
        </button>
        <button type="reset" class="btn reset-btn" id="reg-reset" aria-label="Reset Form">
          <i class="fa-solid fa-rotate"></i> Reset Form
        </button>
      </div>
    </div>
  </form>
</section>

<!-- Privacy Modal -->
<div id="privacy-modal" class="modal-overlay" style="display:none;">
  <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="privacy-title">
    <h2 id="privacy-title"><i class="fa-solid fa-shield-halved"></i> Privacy & Security</h2>
    <p>Your data is stored securely in compliance with privacy policies. Proceed?</p>
    <div class="modal-buttons">
      <button id="privacy-accept" class="btn submit-btn">Accept</button>
      <button id="privacy-cancel" class="btn reset-btn">Cancel</button>
    </div>
  </div>
</div>

<!-- Success Modal -->
<div id="success-modal" class="modal-overlay" style="display:none;">
  <div class="modal-content" role="alertdialog" aria-modal="true" aria-labelledby="success-title">
    <h2 id="success-title" style="color:#F9F6EF;"><i class="fa-solid fa-circle-check"></i> Registration successful!</h2>
    <div style="margin:16px 0;">
      <button id="print-record" class="btn guest-btn" aria-label="Print Record">
        <i class="fa-solid fa-print"></i> Print Record
      </button>
    </div>
  </div>
</div>

<!-- Font & Icons IMPORTS (Add in <head> if not already) -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />

<style>
/* General */
#registration-section {
  width: 100vw; min-height: 100vh;
  background: linear-gradient(135deg,#181818 0%,#141414 100%);
  display: flex; flex-direction: column; align-items: center;
  font-family: 'Inter', Arial, sans-serif;
  padding-bottom: 24px;
}

/* Banner */
.reg-banner {
  width: 100%; height: 80px;
  background: #141414;
  color: #F9F6EF; font-weight: bold;
  font-size: 24px; display: flex; align-items: center; justify-content: center;
  letter-spacing: 1px;
  box-shadow: 0 2px 8px #d4af3722;
}
@media(max-width:480px){ .reg-banner{ font-size:18px;height:56px;} }

.reg-info-box {
  width: 90%; margin: 18px auto 12px auto;
  background: #202020;
  color: #AAAAAA; font-size: 14px;
  padding: 16px; border-radius: 12px;
  box-shadow: 0 2px 10px #2222;
  text-align: center;
}
@media(max-width:480px){ .reg-info-box{ font-size:12px; padding:8px; } }

#reg-form {
  margin: 0 auto; max-width: 600px;
  background: #111; border-radius: 16px; box-shadow: 0 4px 32px #d4af3722;
  padding: 20px;
  display: flex; flex-direction: column; align-items: center; gap:0;
  position: relative;
  animation: fadeInRegForm 0.8s;
}
@keyframes fadeInRegForm { from{opacity:0;transform:translateY(40px);}to{opacity:1;transform:translateY(0);} }

.form-flex {
  width: 100%; display: flex; flex-wrap: wrap; gap: 16px; justify-content: center;
}

/* Form Groups */
.form-group { position:relative; margin-bottom: 4px; }
.full-width { width:100%; }
.half-width { width:48%; min-width:220px; }
@media(max-width:768px){ .half-width, .full-width{ width:100%; } }
@media(max-width:480px){
  #reg-form{padding:10px;}
  .form-flex{gap:8px;}
  .reg-label{font-size:10px;}
}

/* Labels */
.reg-label {
  display: block; font-size:12px; font-weight:600;
  color: #F9F6EF; text-transform:uppercase; letter-spacing:1px;
  margin-bottom:6px; font-family:'Inter',sans-serif;
}

/* Inputs */
.reg-input {
  width: 100%; background: #1A1A1A;
  color: #fff; font-size: 15px; font-family:'Inter',sans-serif;
  border: 1px solid #444; border-radius: 8px;
  padding: 11px 12px; margin-bottom: 0px;
  transition: border-color .3s, box-shadow .3s;
  outline: none;
}
.reg-input::placeholder { color: #888; }
.reg-input:focus, .reg-input:active {
  border-color: #FF007F;
  box-shadow: 0 0 8px #FF007F88;
}
.reg-textarea { resize: vertical; min-height: 48px; }
.reg-date::-webkit-calendar-picker-indicator { filter: invert(1); }
.reg-date { background: #222; color: #fff; }
.reg-select { background: #222; color: #fff; }
.reg-file { background: #222; color:#fff; padding:6px 0;}
.reg-file::-webkit-file-upload-button{background:#FF007F;color:#fff;border-radius:6px;border:none;padding:6px 14px;}
.reg-file:focus{border-color:#FF007F;box-shadow:0 0 8px #FF007F88;}
/* Gender Radios */
.gender-radio-group {
  display: flex; gap: 28px; margin-bottom: 4px;
}
.gender-radio-group label { font-size: 15px; color: #F9F6EF; font-weight:500; }
.gender-radio-group input[type="radio"] { accent-color: #FF007F; cursor:pointer; }

/* Field Tips */
.field-tip {
  display: none;
  position: absolute; left:2px; top: -30px; font-size:13px;
  background: #1A1A1Aee; color: #FF007F;
  border-radius:6px; padding:4px 10px;
  box-shadow: 0 2px 8px #FF007F33;
  font-weight:500; z-index: 2;
  animation: fadeTip .3s;
}
@keyframes fadeTip { from{opacity:0;transform:translateY(-8px);} to{opacity:1;transform:translateY(0);} }
.form-group:focus-within .field-tip { display: block; }

.error-msg {
  display: block; color: #FF007F;
  font-size: 12px; margin-top: 2px; min-height: 14px;
  font-weight: 600;
}

/* Buttons */
.button-row {
  display: flex; flex-direction: row; justify-content: space-between;
  gap: 14px; width: 100%; margin-top: 20px;
}
.btn {
  display: flex; align-items: center; gap: 8px; justify-content: center;
  min-width: 120px; height:48px; font-size:16px; font-family:'Inter',sans-serif;
  border-radius:12px; border:none; text-transform:uppercase; letter-spacing:1px;
  font-weight:600; cursor:pointer; transition:all .3s;
  box-shadow: 0 2px 8px #d4af3722;
}
.guest-btn {
  background: #000; color: #F9F6EF;
}
.guest-btn:hover, #print-record:hover { color:#FFD700; box-shadow:0 0 8px #FFD70099; transform:scale(1.05);}
.submit-btn {
  background: #FF007F; color:#fff;
}
.submit-btn:hover { background:#C40060; box-shadow:0 0 8px #C40060; transform:scale(1.05);}
.reset-btn {
  background: transparent; color: #F9F6EF; border:2px solid #F9F6EF;
}
.reset-btn:hover { background:#F9F6EF; color:#000; box-shadow:0 0 8px #d4af3788; transform:scale(1.05);}
.btn:disabled { opacity:0.5; cursor:not-allowed; }

/* Modals */
.modal-overlay {
  position:fixed;top:0;left:0;width:100vw;height:100vh;
  background:rgba(0,0,0,0.6);display:flex;align-items:center;justify-content:center;z-index:40;
  animation:fadeInModal .3s;
}
@keyframes fadeInModal{from{opacity:0;}to{opacity:1;}}
.modal-content {
  background:#141414;
  color:#F9F6EF;
  border-radius:18px;
  padding:32px 26px;
  box-shadow:0 8px 48px #d4af3788;
  text-align:center;
  min-width:280px;max-width:92vw;
  animation:slideModal .4s;
}
@keyframes slideModal{from{transform:translateY(-32px);opacity:0;}to{transform:translateY(0);opacity:1;}}
.modal-buttons { margin-top:18px; display:flex; gap:14px; justify-content:center; }
#success-modal h2 i { color: #FFD700; margin-right:8px; font-size:1.5em; }
.photo-preview { margin-top:8px; min-height:56px;}
.photo-preview img { max-width:120px;max-height:56px;border-radius:8px;border:2px solid #FFD700;box-shadow:0 2px 8px #FFD70044;}
@media(max-width:480px){
  .btn{font-size:14px;height:40px;}
  .modal-content{padding:20px 8px;}
  .reg-label{font-size:10px;}
}
</style>

<script>
function capitalizeWords(str) {
  return str.replace(/\b\w/g, c => c.toUpperCase());
}

// Mask phone input
function maskPhone(input) {
  let v = input.value.replace(/[^\d+]/g, '');
  if (!v.startsWith('+254')) v = '+254' + v.replace(/^\+?254?/, '');
  v = v.substring(0,13);
  input.value = v;
}

// Show field tips
const fields = [
  {id:"reg-name",tip:"tip-name"},
  {id:"reg-id",tip:"tip-id"},
  {id:"reg-phone",tip:"tip-phone"},
  {id:"reg-address",tip:"tip-address"},
  {id:"reg-dob",tip:"tip-dob"},
  {id:"reg-nation",tip:"tip-nation"},
  {id:"reg-photo",tip:"tip-photo"}
];
fields.forEach(f=>{
  document.addEventListener('focusin',e=>{
    if(e.target.id===f.id) document.getElementById(f.tip).style.display="block";
  });
  document.addEventListener('focusout',e=>{
    if(e.target.id===f.id) document.getElementById(f.tip).style.display="none";
  });
});

// Error/validation
function showError(id,msg){
  document.getElementById('error-'+id).textContent=msg;
  document.getElementById('reg-'+id)?.classList?.add('error-outline');
}
function clearError(id){
  document.getElementById('error-'+id).textContent="";
  document.getElementById('reg-'+id)?.classList?.remove('error-outline');
}

// Enable submit only if terms checked
document.getElementById('reg-terms').addEventListener('change',function(){
  document.getElementById('reg-submit').disabled=!this.checked;
});

// Capitalize full name
document.getElementById('reg-name').addEventListener('input',function(){
  this.value=capitalizeWords(this.value);
});

// Mask phone
document.getElementById('reg-phone').addEventListener('input',function(){
  maskPhone(this);
});

// Photo preview and base64
document.getElementById('reg-photo').addEventListener('change',function(e){
  const file = e.target.files[0];
  const preview = document.getElementById('photo-preview');
  preview.innerHTML = "";
  if(file){
    if(!file.type.match('image/jpeg') && !file.type.match('image/png')){
      showError('photo','Only .jpg or .png allowed');
      return;
    }
    clearError('photo');
    const reader = new FileReader();
    reader.onload = function(ev){
      preview.innerHTML = `<img src="${ev.target.result}" alt="Passport Photo Preview"/>`;
      preview.dataset.base64 = ev.target.result;
    };
    reader.readAsDataURL(file);
  }
});

// Gender selection: required
// Validation
function validateForm(){
  let ok = true;
  // Name
  const name = document.getElementById('reg-name').value.trim();
  if(!name){showError('name','This field is required');ok=false;} else clearError('name');
  // ID
  const idval = document.getElementById('reg-id').value.trim();
  if(!idval){showError('id','This field is required');ok=false;}
  else if(!idval.match(/^[A-Za-z0-9]{4,}$/)){showError('id','Invalid ID/Passport');ok=false;}
  else clearError('id');
  // Phone
  const phone = document.getElementById('reg-phone').value.trim();
  if(!phone || phone.length!=13 || !phone.match(/^\+254\d{9}$/)){showError('phone','Phone format: +254XXXXXXXXX');ok=false;} else clearError('phone');
  // Address
  const address = document.getElementById('reg-address').value.trim();
  if(!address){showError('address','This field is required');ok=false;} else clearError('address');
  // DOB
  const dob = document.getElementById('reg-dob').value;
  if(!dob){showError('dob','Required');ok=false;} else clearError('dob');
  // Nationality
  const nation = document.getElementById('reg-nation').value;
  if(!nation){showError('nation','Required');ok=false;} else clearError('nation');
  // Gender
  const genderEls = document.querySelectorAll('input[name="gender"]');
  let gender = "";
  genderEls.forEach(r=>{if(r.checked)gender=r.value;});
  if(!gender){showError('gender','Required');ok=false;} else clearError('gender');
  // Photo
  const photoData = document.getElementById('photo-preview').dataset.base64 || "";
  if(!photoData){showError('photo','Photo required');ok=false;} else clearError('photo');
  return {ok,name,idval,phone,address,dob,nation,gender,photoData};
}

// Form submit
document.getElementById('reg-form').addEventListener('submit',function(e){
  e.preventDefault();
  const valid = validateForm();
  if(!valid.ok) return;

  // Show privacy modal before saving
  document.getElementById('privacy-modal').style.display="flex";
  let proceed = false;
  document.getElementById('privacy-accept').onclick = function(){
    document.getElementById('privacy-modal').style.display="none";
    proceed = true;
    // Save to localStorage (simulate)
    localStorage.setItem('regData', JSON.stringify({
      name: valid.name,
      id: valid.idval,
      phone: valid.phone,
      address: valid.address,
      dob: valid.dob,
      nation: valid.nation,
      gender: valid.gender,
      photo: valid.photoData
    }));
    // Show success modal
    document.getElementById('success-modal').style.display="flex";
  };
  document.getElementById('privacy-cancel').onclick = function(){
    document.getElementById('privacy-modal').style.display="none";
  };
});

// Print record
document.getElementById('print-record').addEventListener('click',function(){
  const regData = localStorage.getItem('regData');
  if(regData){
    const d = JSON.parse(regData);
    let w = window.open('', '', 'width=600,height=700');
    w.document.write('<html><head><title>Registration Record</title></head><body style="font-family:Inter,Arial,sans-serif;background:#f9f6ef;color:#141414;padding:24px;">');
    w.document.write('<h2>Millennium Casino — Registration Record</h2>');
    w.document.write('<ul style="font-size:16px;">');
    Object.entries(d).forEach(([k,v])=>{
      if(k!=="photo")w.document.write(`<li><strong>${k[0].toUpperCase()+k.slice(1)}:</strong> ${v}</li>`);
    });
    if(d.photo)w.document.write(`<li><strong>Photo:</strong><br><img src="${d.photo}" style="max-width:120px;border-radius:10px;border:2px solid #FFD700;"/></li>`);
    w.document.write('</ul></body></html>');
    w.print();
  }
});

// Reset
document.getElementById('reg-reset').addEventListener('click',function(){
  document.getElementById('photo-preview').innerHTML="";
  document.getElementById('photo-preview').dataset.base64="";
  fields.forEach(f=>clearError(f.id.replace('reg-','')));
});

// Continue as Guest
document.getElementById('continue-guest').addEventListener('click',function(){
  alert("Continuing as guest...");
  // You can redirect or hide registration here if needed
});

// Accessibility: keyboard tab focus
document.querySelectorAll('input,select,textarea,button').forEach(el=>{
  el.addEventListener('focus',function(){this.classList.add('focused');});
  el.addEventListener('blur',function(){this.classList.remove('focused');});
});
</script>

