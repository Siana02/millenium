<!DOCTYPE html>
<html lang="en">
<head>
  <!-- 1. PAGE METADATA -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="theme-color" content="#0A0A0A">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="format-detection" content="telephone=no">

  <!-- 2. TITLE + DESCRIPTION -->
  <title>Millennium Casino Portal – Sleek Registration. Premium Value.</title>
  <meta name="description" content="Millennium Casino's client portal delivers modern UI/UX, secure registration, and investor-ready design.">

  <!-- 3. FAVICONS + DEVICE ICONS -->
  <link rel="icon" type="image/x-icon" href="/assets/icons/favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon-16x16.png">
  <link rel="apple-touch-icon" href="/assets/icons/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/assets/icons/android-chrome-192x192.png">
  <link rel="icon" type="image/png" sizes="512x512" href="/assets/icons/android-chrome-512x512.png">

  <!-- 4. PWA FEATURES -->
  <link rel="manifest" href="/manifest.json">
  <!-- Optional: Apple splash/mask icons (add if needed) -->

  <!-- 5. FONTS (GOOGLE FONTS) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Inter:wght@400;500;700&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

  <!-- 6. STYLESHEETS -->
  <link rel="stylesheet" href="/src/style.css">
  
  <!-- 8. SEO + SOCIAL MEDIA PREVIEW TAGS -->
  <meta property="og:title" content="Millennium Casino Portal">
  <meta property="og:description" content="Sleek, secure registration platform for Millennium Casino, Nyali. Built for investors & clients.">
  <meta property="og:image" content="/assets/images/og-preview.jpg">
  <meta property="og:url" content="https://millenniumcasino.app">
  <meta name="twitter:card" content="summary_large_image">

  <!-- 9. PERFORMANCE + SECURITY -->
  <link rel="dns-prefetch" href="https://fonts.googleapis.com">
  <link rel="dns-prefetch" href="https://fonts.gstatic.com">
  </head>
<body>
 <!-- SECTION 2: LOGIN (Paste inside <body> after your header) -->
<section id="section-login" aria-label="Login Section">
  <form id="login-form" autocomplete="off">
    <div class="login-heading-group">
  <i class="fa-solid fa-shield-halved login-icon" aria-hidden="true"></i>
  <div class="login-title-wrapper">
    <div class="login-title-top" data-i18n="login_title_top">MILLENNIUM</div>
    <div class="login-title-bottom" data-i18n="login_title_bottom">Casino</div>
  </div>
</div>
    <!-- Name Input -->
    <label for="login-name" class="login-label" data-i18n="input_full_name_label">Enter Full Name</label>
    <div class="input-group">
      <i class="fa-solid fa-user input-icon" aria-hidden="true"></i>
      <input
        id="login-name"
        type="text"
        placeholder="Enter Full Name"
        data-i18n="input_full_name_placeholder"
        aria-describedby="login-name-desc"
        required
        />
      <span id="login-name-desc" class="sr-only">Full name required for registration.</span>
    </div>
    <!-- Role Dropdown -->
    <label for="login-role" class="login-label" data-i18n="select_role_label">Select Role</label>
    <div class="input-group">
      <i class="fa-solid fa-briefcase input-icon" aria-hidden="true"></i>
      <select id="login-role" aria-label="Select Role" data-i18n="select_role_dropdown">
        <option value="User" data-i18n="role_user">User</option>
        <option value="Staff" data-i18n="role_staff">Staff</option>
        <option value="Admin" data-i18n="role_admin">Admin</option>
      </select>
    </div>
    <!-- Buttons -->
    <button type="submit" class="btn-login" aria-label="Login" data-i18n="button_login">
      Login <i class="fa-solid fa-arrow-right btn-icon" aria-hidden="true"></i>
    </button>
    <button type="button" id="guest-btn" class="btn-guest" aria-label="Continue as Guest" data-i18n="button_guest">
      <i class="fa-solid fa-user-secret btn-icon" aria-hidden="true"></i> Continue as Guest
    </button>
  </form>
</section>

<!-- Fonts (Import as needed in <head>) -->
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Great+Vibes&family=Inter:wght@400;500;700&display=swap" rel="stylesheet">

<!-- Font Awesome 6 (If not already in <head>) -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />

<style>
/* --- Section Container --- */
#section-login {
  min-height: 100vh;
  width: 100vw;
  display: flex; align-items: center; justify-content: center;
  background: linear-gradient(135deg, #121212 60%, #1a1a1a 100%);
  font-family: 'Inter', 'Poppins', 'Playfair Display', serif;
  animation: fadeInSection 0.8s cubic-bezier(.68,-0.55,.27,1.55);
}
@keyframes fadeInSection { 0%{opacity:0;} 100%{opacity:1;} }

/* --- Login Form Card --- */
#login-form {
  width: 90vw; max-width: 440px;
  background: rgba(18,18,18,0.60);
  border-radius: 2em;
  box-shadow: 0 6px 32px #d4af3722;
  padding: 2.5em 2em;
  display: flex; flex-direction: column; gap: 1.6em; align-items: center;
  backdrop-filter: blur(7px);
  animation: slideUpForm 1.2s cubic-bezier(.68,-0.55,.27,1.55);
  position: relative;
}
@keyframes slideUpForm { 0%{transform:translateY(60px);opacity:0;} 100%{transform:translateY(0);opacity:1;} }

/* Responsive Widths + Padding */
@media (max-width:480px) { #login-form { width:90vw; padding:2em 1em; } }
@media (min-width:481px) and (max-width:1024px) { #login-form { width:60vw; padding:2.7em 2em; } }
@media (min-width:1025px) { #login-form { width:40vw; padding:2.8em 2.2em; } }

/* --- Heading --- */
.login-heading-group {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 0.3em;
  margin-bottom: 0.7em;
}
  .login-title-wrapper {
  text-align: center;
  width: 100%;
}
.login-icon {
  color: #d4af37;
  font-size: 2.3rem;
  margin-right: 0.4em;
  filter: drop-shadow(0 0 6px #d4af3788);
}

/* Top Line: Millennium */
.login-title-top {
  font-family: 'Playfair Display', serif;
  font-size: 1.8rem;
  text-transform: uppercase;
  font-weight: 700;
  letter-spacing: 0.15em;
  background: linear-gradient(90deg, #d4af37 40%, #eccd79 75%, #d4af37 100%);
  -webkit-background-clip: text; -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: -0.35em;
}
@media (min-width:1025px) { .login-title-top { font-size: 2.4rem; } }

/* Bottom Line: Casino (Great Vibes, glow/twinkle) */
.login-title-bottom {
  font-family: 'Great Vibes', cursive;
  font-size: 2rem;
  color: #fdf6e3;
  text-shadow: 0 0 8px #d4af37, 0 0 2px #fff;
  margin-top: -0.7em;
  position: relative;
  animation: casinoTwinkle 3s ease-in-out infinite;
  text-align: center;
}
@keyframes casinoTwinkle {
  0%,100% { text-shadow: 0 0 8px #d4af37, 0 0 2px #fff;}
  60% { text-shadow: 0 0 18px #d4af37, 0 0 8px #fff;}
}

/* --- Labels --- */
.login-label {
  align-self: flex-start;
  font-size: 1.05em;
  font-weight: 500;
  margin-bottom: 0.3em;
  color: #F5F5F5;
  letter-spacing: 0.03em;
  font-family: 'Inter', sans-serif;
}

/* --- Input Group --- */
.input-group {
  position: relative;
  width: 100%;
  margin-bottom: 0.3em;
}
.input-icon {
  position: absolute; left: 0.9em; top: 50%; transform: translateY(-50%);
  color: #D4AF37; font-size: 1.2em;
  z-index: 2;
}
.input-group input, .input-group select {
  width: 100%; min-height: 48px;
  padding: 0.9em 1em 0.9em 2.5em;
  border-radius: 1em;
  background: rgba(0,0,0,0.30);
  color: #F5F5F5;
  border: 2px solid transparent;
  outline: none;
  font-size: 1em;
  font-family: 'Inter', 'Poppins', sans-serif;
  transition: border-color .23s, box-shadow .23s, transform .18s;
  box-shadow: 0 2px 8px #C00E3B22;
}
.input-group input:focus, .input-group select:focus {
  border-color: #D4AF37; box-shadow: 0 0 12px #D4AF3755; transform: scale(1.02);
}
.input-group select:focus { animation: expandDrop 0.2s; }
@keyframes expandDrop { from{transform:scaleY(0.95);}to{transform:scaleY(1.03);} }
.input-group select {
  appearance: none; background: rgba(0,0,0,0.30);
}
.input-group select:active, .input-group select:focus {
  outline: 2px solid #d4af37;
}
.input-group option { color: #121212; background: #fff;}

/* --- Buttons --- */
.btn-login, .btn-guest {
  width: 100%; min-height: 48px; padding: 1em 0;
  font-size: 1.15em; font-weight: bold;
  border-radius: 1.5em; border: none; cursor: pointer; margin-top: 0.5em;
  display: flex; align-items: center; justify-content: center; gap: 0.7em;
  box-shadow: 0 2px 12px #C00E3B22;
  transition: box-shadow 0.2s, transform 0.13s, background 0.17s;
}
@media (min-width:1025px) { .btn-login, .btn-guest { font-size: 1.2em; min-height: 56px; } }
.btn-login {
  background: linear-gradient(90deg, #D4AF37 70%, #C00E3B 100%);
  color: #0A0A0A;
}
.btn-login:hover { box-shadow: 0 0 20px #D4AF37; transform: translateY(-2px) scale(1.04); }
.btn-login:active { transform: scale(0.98); }
.btn-guest {
  background: linear-gradient(90deg, #C00E3B 60%, #D4AF37 100%);
  color: #F5F5F5;
}
.btn-guest:hover { box-shadow: 0 0 14px #C00E3B; transform: translateY(-2px) scale(1.03); }
.btn-guest:active { transform: scale(0.98); }
.btn-icon {
  font-size: 1.2em;
  margin-left: 0.3em;
}
/* --- Accessibility --- */
.sr-only { position:absolute;width:1px;height:1px;overflow:hidden;clip:rect(1px,1px,1px,1px); }
input:focus, select:focus, button:focus { outline: 2px solid #d4af37; outline-offset: 2px; }
input, select, button { font-family: inherit; }
input:-webkit-autofill { -webkit-box-shadow: 0 0 0 30px #121212 inset; -webkit-text-fill-color: #F5F5F5;}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // Fade-in handled by CSS, slide-up handled by CSS
  // Name field accessibility
  const loginForm = document.getElementById('login-form');
  loginForm.addEventListener('submit', function(e) {
    e.preventDefault();
    const name = document.getElementById('login-name').value.trim();
    const role = document.getElementById('login-role').value;
    localStorage.setItem('casinoUserName', name);
    localStorage.setItem('casinoUserRole', role);
    // Fade out section-login, then fake dashboard
    document.getElementById('section-login').style.transition = "opacity 0.5s";
    document.getElementById('section-login').style.opacity = 0;
    setTimeout(() => {
      document.getElementById('section-login').style.display = 'none';
      showDashboard(name, role);
    }, 500);
  });
  document.getElementById('guest-btn').addEventListener('click', function() {
    localStorage.setItem('casinoUserName', 'Guest');
    localStorage.setItem('casinoUserRole', 'User');
    document.getElementById('section-login').style.transition = "opacity 0.5s";
    document.getElementById('section-login').style.opacity = 0;
    setTimeout(() => {
      document.getElementById('section-login').style.display = 'none';
      showDashboard('Guest', 'User');
    }, 500);
  });
  // Keyboard accessibility for select
  document.getElementById('login-role').addEventListener('keydown', function(e){
    if(e.key === 'ArrowDown' || e.key === 'ArrowUp'){ this.size = 3; }
    if(e.key === 'Escape' || e.key === 'Tab'){ this.size = 1; }
  });
});

function showDashboard(name, role) {
  // Replace with real dashboard code
  alert("Welcome, " + name + " (" + role + ")! [Dashboard would appear here]");
}
</script>
<!-- SECTION 3: GUEST REGISTRATION DASHBOARD -->
<section id="guest-dashboard">

  <!-- HEADER (Branding) -->
  <div class="dashboard-header-bg">
    <div class="dashboard-header">
      <div class="dashboard-title-top">Millennium</div>
      <div class="dashboard-title-bottom">Casino</div>
    </div>
  </div>

  <!-- Subheader -->
  <div class="dashboard-subheader">GUEST REGISTRATION</div>
  <hr class="dashboard-gold-divider" />

  <!-- FORM CONTAINER -->
  <form id="guest-reg-form" autocomplete="off" novalidate>
    <div class="dashboard-form-grid">

      <!-- ID Upload Section -->
      <div class="id-upload-section">
        <div class="id-upload-title">
          <i class="fa-solid fa-id-card fa-fw"></i> Upload Your ID/Passport
        </div>
        <div class="id-upload-cards">
          <!-- Front of ID -->
          <div class="id-card-upload" id="front-id-upload">
            <button type="button" class="id-upload-btn" id="btn-front-upload">
              <span class="id-upload-icon"><i class="fa-solid fa-camera"></i></span>
              <span class="id-upload-label">Take Photo: Front of ID</span>
            </button>
            <div class="id-upload-preview" id="front-id-preview"></div>
          </div>
          <!-- Back of ID -->
          <div class="id-card-upload" id="back-id-upload">
            <button type="button" class="id-upload-btn" id="btn-back-upload">
              <span class="id-upload-icon"><i class="fa-solid fa-camera"></i></span>
              <span class="id-upload-label">Take Photo: Back of ID</span>
            </button>
            <div class="id-upload-preview" id="back-id-preview"></div>
          </div>
        </div>
        <div class="scan-hint" id="scan-hint"></div>
        <div class="id-security-notes">
          <span class="gold-italic">
            <i class="fa-solid fa-lock"></i> We only store this data on your device using secure internal storage.<br>
            <i class="fa-solid fa-shield-halved"></i> None of your data is shared or uploaded externally.
          </span>
        </div>
      </div>

      <!-- Autofill Section (hidden until both images uploaded) -->
      <div class="auto-fill-section" id="auto-fill-section" style="display:none;">
        <div class="auto-fill-header">
          <span>Auto-filled from your ID</span>
          <i class="fa-solid fa-circle-info" title="Fields were extracted from your document using secure on-device OCR."></i>
        </div>
        <div class="auto-fill-fields">
          <div class="auto-fill-row">
            <label>Full Name</label>
            <span id="auto-fullname"></span>
            <span class="match-indicator" id="match-name"></span>
          </div>
          <div class="auto-fill-row">
            <label>ID Number</label>
            <span id="auto-idnumber"></span>
            <span class="match-indicator" id="match-id"></span>
          </div>
          <div class="auto-fill-row">
            <label>Date of Birth</label>
            <span id="auto-dob"></span>
            <span class="match-indicator" id="match-dob"></span>
          </div>
          <div class="auto-fill-row">
            <label>Nationality</label>
            <span id="auto-nation"></span>
            <span class="match-indicator" id="match-nation"></span>
          </div>
          <div class="auto-fill-row">
            <label>Gender</label>
            <span id="auto-gender"></span>
            <span class="match-indicator" id="match-gender"></span>
          </div>
        </div>
      </div>

      <!-- Form Inputs (appear after scan or can be manually entered) -->
      <div class="form-fields-section" id="form-fields-section" style="display:none;">
        <div class="form-fields-row">
          <div class="form-group">
            <label for="field-name"><i class="fa-solid fa-user"></i> Full Name</label>
            <input type="text" id="field-name" name="name" placeholder="e.g. John Mwangi Odhiambo" autocomplete="name" />
            <span class="error-msg" id="error-name"></span>
          </div>
          <div class="form-group">
            <label for="field-id"><i class="fa-solid fa-id-card"></i> ID Number</label>
            <input type="text" id="field-id" name="id" placeholder="ID / Passport No." />
            <span class="error-msg" id="error-id"></span>
          </div>
        </div>
        <div class="form-fields-row">
          <div class="form-group">
            <label for="field-dob"><i class="fa-solid fa-calendar-days"></i> Date of Birth</label>
            <input type="date" id="field-dob" name="dob" />
            <span class="error-msg" id="error-dob"></span>
          </div>
          <div class="form-group">
            <label for="field-nation"><i class="fa-solid fa-globe"></i> Nationality</label>
            <select id="field-nation" name="nation">
              <option value="">Select...</option>
              <option value="Kenyan">Kenyan</option>
              <option value="Ugandan">Ugandan</option>
              <option value="Tanzanian">Tanzanian</option>
              <option value="Rwandan">Rwandan</option>
              <option value="Burundian">Burundian</option>
              <option value="Other">Other</option>
            </select>
            <span class="error-msg" id="error-nation"></span>
          </div>
        </div>
        <div class="form-fields-row">
          <div class="form-group">
            <label>Gender</label>
            <div class="gender-radio-group">
              <label><input type="radio" name="gender" value="Male" /> Male</label>
              <label><input type="radio" name="gender" value="Female" /> Female</label>
              <label><input type="radio" name="gender" value="Other" /> Other</label>
            </div>
            <span class="error-msg" id="error-gender"></span>
          </div>
        </div>
        <div class="form-fields-row">
          <button type="submit" class="reg-btn" id="reg-submit">
            <i class="fa-solid fa-check"></i> Submit Registration
          </button>
        </div>
        <div class="privacy-policy-link">
          <a href="privacy.html" target="_blank">Privacy Policy</a>
        </div>
      </div>
    </div>
  </form>
</section>

<!-- IMAGE MODAL FOR PREVIEW -->
<div id="img-modal" class="img-modal" style="display:none;">
  <div class="img-modal-content">
    <span class="img-modal-close">&times;</span>
    <img id="img-modal-preview" src="" alt="Enlarged ID Preview" />
  </div>
</div>

<!-- SUCCESS POPUP -->
<div id="reg-success-popup" class="reg-success-popup" style="display:none;">
  <div class="reg-success-inner">
    <i class="fa-solid fa-circle-check"></i> Registration successful!
  </div>
</div>

<!-- FONTS & ICONS -->
<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Playfair+Display:wght@400&family=Poppins:wght@700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />

<style>
/* ---- HEADER ---- */
.dashboard-header-bg {
  width: 100vw;
  background: #000;
  background-image: linear-gradient(90deg, #1a1a1a 0%, #000 100%), repeating-linear-gradient(135deg, #E6C87A10 0px, #E6C87A10 2px, transparent 2px, transparent 24px);
  padding-top: 2.2rem; padding-bottom: 1.2rem;
  text-align: center;
}
.dashboard-header {
  display: flex; flex-direction: column; align-items: center; justify-content: center;
}
.dashboard-title-top {
  font-family: 'Playfair Display', serif;
  font-size: clamp(1.2rem, 2vw, 2rem);
  color: #fff;
  font-weight: 400;
  letter-spacing: 0.13em;
  margin-bottom: -0.7em;
  text-transform: small-caps;
}
.dashboard-title-bottom {
  font-family: 'Great Vibes', cursive;
  font-size: clamp(2rem, 5vw, 3.2rem);
  color: #E6C87A;
  font-weight: bold;
  letter-spacing: 0.06em;
  margin-top: -0.3em;
  text-shadow: 0 0 24px #E6C87A88, 0 0 2px #fff;
  animation: casinoTwinkle 3.2s infinite;
}
@keyframes casinoTwinkle {
  0%,100% { text-shadow: 0 0 24px #E6C87A88, 0 0 2px #fff;}
  60% { text-shadow: 0 0 36px #E6C87Acc, 0 0 8px #fff;}
}
.dashboard-subheader {
  font-family: 'Poppins', Arial, sans-serif;
  font-size: clamp(1.2rem, 2vw, 2rem);
  color: #E6C87A;
  font-weight: bold;
  letter-spacing: 0.13em;
  text-transform: uppercase;
  margin: 0 auto 0.6rem auto;
  text-align: center;
  padding-top: 24px;
}
.dashboard-gold-divider {
  border: none;
  border-top: 2px solid #E6C87A88;
  width: 10vw; max-width: 140px; margin: 0 auto 2.2rem auto;
  opacity: 0.8;
}

/* ---- FORM CONTAINER ---- */
#guest-reg-form {
  background: #181818;
  border-radius: 18px;
  box-shadow: 0 6px 36px #E6C87A33;
  border: 1.5px solid #E6C87A44;
  max-width: 1600px;
  margin: 0 auto;
  padding: 2rem 4vw;
  display: flex; flex-direction: column; gap: 2rem;
  font-family: 'Poppins', Arial, sans-serif;
}
.dashboard-form-grid { width:100%; }

/* --- ID UPLOAD --- */
.id-upload-section {
  margin-bottom: 2rem;
}
.id-upload-title {
  color: #E6C87A;
  font-weight: bold;
  font-size: clamp(1rem, 1.2vw, 1.3rem);
  margin-bottom: 0.7rem;
  letter-spacing: 0.06em;
  display: flex; align-items: center; gap: 0.5em;
}
.id-upload-cards {
  display: flex; flex-direction: row; gap: 2vw; justify-content: center;
}
.id-card-upload {
  background: #111;
  border-radius: 14px;
  box-shadow: 0 2px 10px #E6C87A22;
  border: 1px solid #E6C87A55;
  padding: 1rem 0.7rem;
  min-width: 180px; max-width: 320px;
  display: flex; flex-direction: column; align-items: center; gap: 0.5rem;
  margin-bottom: 1.5rem;
  position: relative;
}
.id-upload-btn {
  background: #E6C87A;
  color: #181818;
  font-size: 1rem;
  font-weight: bold;
  border-radius: 0.8rem;
  padding: 0.7em 1em;
  border: none;
  box-shadow: 0 2px 10px #E6C87A44;
  display: flex; align-items: center; gap: 0.7em; justify-content: center;
  cursor: pointer;
  transition: box-shadow 0.3s, transform 0.3s;
  margin-bottom: 0.5rem;
  position: relative;
}
.id-upload-btn:hover {
  box-shadow: 0 0 16px #E6C87A, 0 0 4px #fff;
  transform: scale(1.04);
}
.id-upload-icon {
  animation: camBlink 2s infinite;
  color: #E6C87A;
  font-size: 1.2em;
}
@keyframes camBlink {
  0%,100% { opacity: 1;}
  60% { opacity: 0.4;}
}
.id-upload-preview {
  margin-top: 0.5rem; min-height: 54px;
  display: flex; align-items: center; justify-content: center;
}
.id-upload-preview img {
  max-width: 120px; max-height: 54px; border-radius: 10px;
  border: 2px solid #E6C87A;
  box-shadow: 0 0 12px #E6C87A55;
  cursor: pointer;
  transition: transform 0.2s;
}
.id-upload-preview img:hover {
  transform: scale(1.15);
  box-shadow: 0 0 24px #E6C87A99;
}
.scan-hint {
  color: #E6C87A; background: #222; border-radius: 0.7em;
  font-size: 1rem; padding: 0.5em 1em; margin: 1em auto 0 auto;
  text-align: center;
  box-shadow: 0 2px 10px #E6C87A33;
  display: none; position: relative;
  animation: scanHintAnim 0.5s;
}
@keyframes scanHintAnim {
  from{opacity:0;transform:translateY(-10px);}
  to{opacity:1;transform:translateY(0);}
}

/* --- SECURITY NOTE --- */
.id-security-notes { margin: 0.7rem auto 0.7rem auto; text-align: center;}
.gold-italic {
  color: #E6C87A; font-style: italic; opacity: 0.85; font-size: 0.93em;
  letter-spacing: 0.01em;
}

/* --- AUTO FILL SECTION --- */
.auto-fill-section {
  background: #E6C87A18;
  border-radius: 14px;
  box-shadow: 0 2px 8px #E6C87A22;
  padding: 1.2rem 1.2rem;
  margin: 1.2rem auto;
  max-width: 480px;
  animation: autofillFadeIn 0.8s;
}
@keyframes autofillFadeIn { from{opacity:0;transform:translateY(30px);} to{opacity:1;transform:translateY(0);} }
.auto-fill-header {
  font-family: 'Poppins', Arial, sans-serif;
  font-size: 1.1em; color: #E6C87A; font-weight: bold;
  margin-bottom: 0.7rem;
  display: flex; align-items: center; gap: 0.5em;
}
.auto-fill-fields { margin-top: 0.6rem;}
.auto-fill-row {
  display: flex; align-items: center; gap: 1em; justify-content: flex-start;
  font-size: 1rem; margin-bottom: 0.5rem;
}
.auto-fill-row label { color: #fff; min-width: 102px; font-weight: 500;}
.auto-fill-row span { font-weight: 500;}
.match-indicator {
  margin-left: 0.6em;
  font-size: 1.3em;
  vertical-align: middle;
}
.match-indicator.match { color: #1fc600; }
.match-indicator.no-match { color: #c40000; }

/* --- FORM FIELDS --- */
.form-fields-section { margin-top: 2rem; }
.form-fields-row {
  display: flex; gap: 2vw; flex-wrap: wrap; justify-content: center;
  margin-bottom: 1rem;
}
.form-group {
  display: flex; flex-direction: column; min-width: 180px; max-width: 300px; width: 100%;
  background: #111;
  border-radius: 10px;
  padding: 1em;
  margin-bottom: 0.5em;
  box-shadow: 0 2px 8px #E6C87A33;
}
.form-group label {
  font-family: 'Poppins', Arial, sans-serif;
  color: #E6C87A;
  font-size: 1em;
  font-weight: bold;
  margin-bottom: 0.5em;
  letter-spacing: 0.07em;
  display: flex; align-items: center; gap: 0.4em;
}
.form-group input,
.form-group select {
  background: #181818;
  color: #fff;
  border: 1px solid #E6C87A80;
  border-radius: 7px;
  padding: 0.7em 1em;
  font-size: 1em;
  font-family: 'Poppins', Arial, sans-serif;
  margin-bottom: 0.4em;
  transition: border-color 0.3s, box-shadow 0.3s;
  outline: none;
}
.form-group input:focus,
.form-group select:focus {
  border-color: #E6C87A;
  box-shadow: 0 0 8px #E6C87A88;
}
.gender-radio-group {
  display: flex; gap: 1.4em; margin-top: 0.3em;
}
.gender-radio-group label {
  font-size: 1em; color: #fff; font-weight: 500;
}
.gender-radio-group input[type="radio"] {
  accent-color: #E6C87A; cursor:pointer;
}
.error-msg {
  color: #c40000; font-size: 0.93em; min-height: 18px; font-weight: 600;
}

/* --- BUTTONS --- */
.reg-btn {
  background: #E6C87A;
  color: #181818;
  font-family: 'Poppins', Arial, sans-serif;
  font-size: 1.02em;
  font-weight: bold;
  border-radius: 1.2em;
  border: none;
  padding: 0.8em 2em;
  box-shadow: 0 2px 10px #E6C87A44;
  cursor: pointer;
  transition: box-shadow 0.3s, transform 0.3s;
  max-width: 200px;
  float: right;
}
.reg-btn:hover {
  box-shadow: 0 0 16px #fff, 0 0 8px #E6C87A;
  transform: scale(1.06);
}

/* --- PRIVACY POLICY LINK --- */
.privacy-policy-link {
  margin: 2.3em 0 0 0; width: 100%; text-align: right;
}
.privacy-policy-link a {
  color: #E6C87A; font-size: 1em;
  text-decoration: underline;
  opacity: 0.8;
}

/* --- MODALS --- */
.img-modal {
  position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
  background: rgba(0,0,0,0.7); z-index: 100; display: flex; align-items: center; justify-content: center;
  animation: modalFadeIn 0.5s;
}
@keyframes modalFadeIn { from{opacity:0;}to{opacity:1;} }
.img-modal-content {
  background: #181818; border-radius: 12px; box-shadow: 0 0 32px #E6C87A77;
  padding: 2rem; text-align: center; position: relative;
}
.img-modal-content img {
  max-width: 90vw; max-height: 70vh; border-radius: 12px; border: 2px solid #E6C87A;
}
.img-modal-close {
  position: absolute; top: 14px; right: 18px; font-size: 2rem; color: #E6C87A; cursor: pointer; font-weight: bold;
  transition: color 0.2s;
}
.img-modal-close:hover { color: #FFD700; }

.reg-success-popup {
  position:fixed; top:50%; left:50%; transform:translate(-50%,-50%);
  z-index:120; background:#181818ee; border-radius:16px; box-shadow:0 6px 28px #E6C87A99;
  padding:2rem 3rem; text-align:center; animation:popupFadeIn 0.5s;
}
@keyframes popupFadeIn{from{opacity:0;transform:scale(0.5);}to{opacity:1;transform:scale(1);}}
.reg-success-inner {
  font-size: 1.5em; color: #E6C87A; font-family: 'Poppins', Arial, sans-serif;
  letter-spacing: 0.06em; font-weight: bold;
  display: flex; align-items: center; gap: 0.6em; justify-content: center;
}
.reg-success-inner i { color: #1fc600; }

/* --- RESPONSIVE --- */
@media (max-width:480px){
  .dashboard-header-bg{padding-top:1.2rem;padding-bottom:0.5rem;}
  #guest-reg-form{padding:1rem;}
  .dashboard-gold-divider{margin-bottom:1rem;}
  .id-upload-cards{flex-direction:column;gap:1rem;}
  .form-fields-row{flex-direction:column;gap:1rem;}
  .reg-btn{width:100%;max-width:none;float:none;}
  .auto-fill-section{padding:0.7rem;}
}
@media (min-width:481px) and (max-width:768px){
  #guest-reg-form{padding:2rem;}
  .id-upload-cards{flex-direction:row;gap:2vw;}
  .form-fields-row{flex-direction:row;}
  .reg-btn{width:100%;max-width:none;}
}
@media (min-width:769px){
  #guest-reg-form{padding:4rem 10%;}
  .id-upload-cards{flex-direction:row;gap:2vw;}
  .form-fields-row{flex-direction:row;}
  .reg-btn{max-width:200px;}
}
@media (min-width:1441px){
  #guest-reg-form{padding:6rem 20%;}
  .dashboard-header-bg{padding-top:3.2rem;}
  .id-upload-cards{gap:3vw;}
  .form-group{max-width:360px;}
}

/* --- Accessibility --- */
input:focus,select:focus,button:focus{outline:2px solid #E6C87A;outline-offset:2px;}
input,select,button{font-family:inherit;}
</style>

<script>
// --- IMAGE CAPTURE/UPLOAD ---
let frontIdData = "", backIdData = "";
function showScanHint(msg) {
  const hint = document.getElementById('scan-hint');
  hint.textContent = msg;
  hint.style.display = 'block';
  setTimeout(()=>{ hint.style.display = 'none'; }, 4000);
}

// Use file upload instead of camera for demo
function handleUpload(side) {
  showScanHint(`Upload a clear photo of the ${side} of your ID`);
  const input = document.createElement('input');
  input.type = 'file';
  input.accept = "image/jpeg,image/png";
  input.click();

  input.onchange = function() {
    const file = input.files[0];
    if (!file) return;
    const reader = new FileReader();
    reader.onload = function(ev) {
      if(side==="front") {
        frontIdData = ev.target.result;
        document.getElementById('front-id-preview').innerHTML =
          `<img src="${frontIdData}" alt="Front of ID" title="Front of ID" />`;
      } else {
        backIdData = ev.target.result;
        document.getElementById('back-id-preview').innerHTML =
          `<img src="${backIdData}" alt="Back of ID" title="Back of ID" />`;
      }
      checkBothUploads();
    };
    reader.readAsDataURL(file);
  };
}
// Click handlers for camera upload buttons
document.getElementById('btn-front-upload').onclick = ()=>handleUpload("front");
document.getElementById('btn-back-upload').onclick = ()=>handleUpload("back");

// Preview modal
function setupImgModal() {
  ['front-id-preview','back-id-preview'].forEach(id=>{
    document.getElementById(id).addEventListener('click',function(e){
      if(e.target.tagName==='IMG'){
        document.getElementById('img-modal-preview').src = e.target.src;
        document.getElementById('img-modal').style.display = 'flex';
      }
    });
  });
  document.querySelector('.img-modal-close').onclick = function(){
    document.getElementById('img-modal').style.display = 'none';
  };
}
setupImgModal();

// --- AUTO-FILL MOCK (simulate OCR extraction) ---
function checkBothUploads() {
  if(frontIdData && backIdData) {
    // Show autofill section with mock data
    document.getElementById('auto-fill-section').style.display = "block";
    document.getElementById('form-fields-section').style.display = "block";
    // Simulated extracted info
    let extracted = {
      name: "John Mwangi Odhiambo",
      id: "A1234567",
      dob: "1992-06-18",
      nation: "Kenyan",
      gender: "Male"
    };
    // Fill extracted
    document.getElementById('auto-fullname').textContent = extracted.name;
    document.getElementById('auto-idnumber').textContent = extracted.id;
    document.getElementById('auto-dob').textContent = extracted.dob;
    document.getElementById('auto-nation').textContent = extracted.nation;
    document.getElementById('auto-gender').textContent = extracted.gender;
    // Match check (compare to fields, update indicators)
    updateMatchIndicators(extracted);
  }
}
function updateMatchIndicators(extracted) {
  // Compare values
  let name = document.getElementById('field-name').value.trim();
  let idnum = document.getElementById('field-id').value.trim();
  let dob = document.getElementById('field-dob').value.trim();
  let nation = document.getElementById('field-nation').value.trim();
  let gender = "";
  document.querySelectorAll('input[name="gender"]').forEach(el=>{if(el.checked)gender=el.value});
  // For demo, if empty, use extracted
  if(!name) { document.getElementById('field-name').value = extracted.name; name = extracted.name; }
  if(!idnum) { document.getElementById('field-id').value = extracted.id; idnum = extracted.id; }
  if(!dob) { document.getElementById('field-dob').value = extracted.dob; dob = extracted.dob; }
  if(!nation) { document.getElementById('field-nation').value = extracted.nation; nation = extracted.nation; }
  if(!gender) {
    document.querySelectorAll('input[name="gender"]').forEach(el=>{
      if(el.value===extracted.gender) el.checked=true;
    });
    gender = extracted.gender;
  }
  // Matching indicators
  setMatch('name', name === extracted.name);
  setMatch('id', idnum === extracted.id);
  setMatch('dob', dob === extracted.dob);
  setMatch('nation', nation === extracted.nation);
  setMatch('gender', gender === extracted.gender);
}
function setMatch(field, isMatch) {
  const el = document.getElementById('match-'+field);
  if(isMatch) {
    el.textContent = '✅';
    el.className = 'match-indicator match';
  } else {
    el.textContent = '⚠️';
    el.className = 'match-indicator no-match';
  }
}
// Update indicators live
['field-name','field-id','field-dob','field-nation'].forEach(id=>{
  document.getElementById(id).addEventListener('input',function(){
    let extracted = {
      name: document.getElementById('auto-fullname').textContent,
      id: document.getElementById('auto-idnumber').textContent,
      dob: document.getElementById('auto-dob').textContent,
      nation: document.getElementById('auto-nation').textContent,
      gender: document.getElementById('auto-gender').textContent
    };
    updateMatchIndicators(extracted);
  });
});
document.querySelectorAll('input[name="gender"]').forEach(el=>{
  el.addEventListener('change',function(){
    let extracted = {
      name: document.getElementById('auto-fullname').textContent,
      id: document.getElementById('auto-idnumber').textContent,
      dob: document.getElementById('auto-dob').textContent,
      nation: document.getElementById('auto-nation').textContent,
      gender: document.getElementById('auto-gender').textContent
    };
    updateMatchIndicators(extracted);
  });
});

// --- FORM SUBMIT --- //
function showError(id, msg) {
  document.getElementById('error-'+id).textContent = msg;
}
function clearError(id) {
  document.getElementById('error-'+id).textContent = '';
}
document.getElementById('guest-reg-form').addEventListener('submit',function(e){
  e.preventDefault();
  // Validate all fields (simple)
  let ok = true;
  let name = document.getElementById('field-name').value.trim();
  let idnum = document.getElementById('field-id').value.trim();
  let dob = document.getElementById('field-dob').value.trim();
  let nation = document.getElementById('field-nation').value.trim();
  let gender = "";
  document.querySelectorAll('input[name="gender"]').forEach(el=>{if(el.checked)gender=el.value});
  if(!name) { showError('name','Required'); ok=false; } else clearError('name');
  if(!idnum) { showError('id','Required'); ok=false; } else clearError('id');
  if(!dob) { showError('dob','Required'); ok=false; } else clearError('dob');
  if(!nation) { showError('nation','Required'); ok=false; } else clearError('nation');
  if(!gender) { showError('gender','Required'); ok=false; } else clearError('gender');
  if(!frontIdData || !backIdData) {
    showScanHint("Please upload BOTH sides of your ID before submitting.");
    ok = false;
  }
  if(!ok) return;
  // Simulate saving to localStorage
  localStorage.setItem('guestReg', JSON.stringify({
    name, idnum, dob, nation, gender, frontIdData, backIdData
  }));
  // Show success popup
  document.getElementById('reg-success-popup').style.display = 'block';
  setTimeout(()=>{ document.getElementById('reg-success-popup').style.display = 'none'; }, 4000);
  // Optionally clear form
  // this.reset();
});

// Accessibility: keyboard tab focus
document.querySelectorAll('input,select,button').forEach(el=>{
  el.addEventListener('focus',function(){this.classList.add('focused');});
  el.addEventListener('blur',function(){this.classList.remove('focused');});
});
</script>

  
 
